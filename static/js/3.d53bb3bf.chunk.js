(this["webpackJsonpvelo-friends"]=this["webpackJsonpvelo-friends"]||[]).push([[3],{305:function(e,s,t){e.exports={dialogs:"Dialogs_dialogs__3Zbdx",dialogsTitle:"Dialogs_dialogsTitle__QCU90",dialogsContent:"Dialogs_dialogsContent__3MJab",dialogsColumn:"Dialogs_dialogsColumn__1aQch",messagesColumn:"Dialogs_messagesColumn__1Z03e",messagesItems:"Dialogs_messagesItems__33bR3"}},306:function(e,s,t){e.exports={dialogItem:"DialogItem_dialogItem__3AjHK",NavLink:"DialogItem_NavLink__28e6D",dialogItemActive:"DialogItem_dialogItemActive__2MYNC"}},307:function(e,s,t){e.exports={messageWrapper:"MessagesItem_messageWrapper__3VskI",owner:"MessagesItem_owner__W4GRb",messageAuthor:"MessagesItem_messageAuthor__1JTqE",messageAuthorPhoto:"MessagesItem_messageAuthorPhoto__1x4M2",messageAuthorName:"MessagesItem_messageAuthorName__2tIuO",messageText:"MessagesItem_messageText__1Cwle",messageAuthorPhotoOwner:"MessagesItem_messageAuthorPhotoOwner__KdKRR",messageTextOwner:"MessagesItem_messageTextOwner__3TQgC"}},308:function(e,s,t){e.exports={newPosts:"AddNewMessage_newPosts__3yqf4",newPosts__title:"AddNewMessage_newPosts__title__1iZ4S",newPosts__text:"AddNewMessage_newPosts__text__3GvE0",newPosts__button:"AddNewMessage_newPosts__button__36opm"}},314:function(e,s,t){"use strict";t.r(s);var a=t(2),o=t(30),n=t(31),i=t(33),l=t(32),r=t(1),c=t.n(r),d=t(18),g=t(14),m=t(12),u=t(23),j=t(104),h=t(305),_=t.n(h),b=t(22),O=t(306),x=t.n(O),p=t(0),f=function(e){return Object(p.jsx)("p",{className:x.a.dialogItem,children:Object(p.jsx)(b.b,{to:"/dialogs/"+e.id,className:x.a.NavLink,activeClassName:x.a.dialogItemActive,children:e.name})})},v=function(e){var s=e.dialogs.map((function(e){return Object(p.jsx)(f,{name:e.name,id:e.id},e.id)}));return Object(p.jsx)("div",{children:s})},w=t(15),N=t(49),I=t(44),M=t.n(I),A=t(307),P=t.n(A),T=function(e){return"\u042f"==e.name?Object(p.jsxs)("div",{className:M()(P.a.messageWrapper,P.a.owner),children:[Object(p.jsxs)("div",{className:P.a.messageAuthor,children:[Object(p.jsx)("div",{className:P.a.messageAuthorPhotoOwner,children:Object(p.jsx)("img",{src:e.photos||N.a,alt:""})}),Object(p.jsx)("div",{className:P.a.messageAuthorName,children:e.name})]}),Object(p.jsx)("p",{className:P.a.messageTextOwner,children:e.messageText})]}):Object(p.jsxs)("div",{className:P.a.messageWrapper,children:[Object(p.jsxs)("div",{className:P.a.messageAuthor,children:[Object(p.jsx)("div",{className:P.a.messageAuthorPhoto}),Object(p.jsx)("div",{className:P.a.messageAuthorName,children:e.name})]}),Object(p.jsx)("p",{className:P.a.messageText,children:e.messageText})]})},C=function(e){Object(i.a)(t,e);var s=Object(l.a)(t);function t(){var e;Object(o.a)(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(e=s.call.apply(s,[this].concat(n))).scrollToBottom=function(){e.messagesEnd.scrollIntoView({behavior:"smooth"})},e}return Object(n.a)(t,[{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"getDialogId",value:function(){return this.props.dialogId?this.props.dialogId:0}},{key:"getMessagesItems",value:function(){var e=this,s=Object(w.a)(this.props.dialogsMessages.filter((function(s){return s.id==+e.getDialogId()})));if(s.length>0)return s[0].messages.map((function(s){return Object(p.jsx)(T,{name:s.name,messageText:s.messagesText,id:s.id,photos:e.props.photos},s.id)}))}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{id:"toBottom",children:[this.getMessagesItems(),Object(p.jsx)("div",{style:{float:"left",clear:"both"},ref:function(s){e.messagesEnd=s}})]})}}]),t}(c.a.Component),D=t(308),k=t.n(D),y=t(134),U=t(135),E=t(76),F=Object(U.a)({form:"DialogsAddNewMessage",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){return Object(p.jsxs)("form",{className:k.a.newPosts,onSubmit:e.handleSubmit,children:[Object(p.jsx)("label",{htmlFor:"newMessage"}),Object(p.jsx)(y.a,{className:k.a.newPosts__text,component:"textarea",name:"newMessage",validate:[E.c],placeholder:"\u043c\u043e\u0454 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f.."}),Object(p.jsx)("button",{className:"button ".concat(k.a.newPosts__button),children:"\u0412\u0456\u0434\u043f\u0440\u0430\u0432\u0438\u0442\u0438"})]})})),R=function(e){Object(r.useEffect)((function(){e.resetNewMessageField()}),[e.dialogId]);return Object(p.jsxs)("div",{children:[Object(p.jsx)("p",{className:k.a.newPosts__title,children:"\u041d\u043e\u0432\u0435 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),Object(p.jsx)(F,{onSubmit:function(s){e.addNewMessage(s.newMessage,e.dialogId),console.log(s.newMessage)},onChange:function(s){e.setCurrentTextOfMessage(s.newMessage,e.dialogId)},initialValues:{newMessage:void 0!=e.dialogsMessages.filter((function(s){return s.id==+e.dialogId}))[0]?e.dialogsMessages.filter((function(s){return s.id==+e.dialogId}))[0].newMessageText:""}})]})},W=function(e){return Object(p.jsxs)("section",{className:_.a.dialogs,children:[Object(p.jsx)("p",{className:_.a.dialogsTitle,children:"\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f"}),Object(p.jsxs)("div",{className:_.a.dialogsContent,children:[Object(p.jsx)("div",{className:_.a.dialogsColumn,children:Object(p.jsx)("div",{className:_.a.dialog,children:Object(p.jsx)(v,Object(a.a)({},e))})}),Object(p.jsxs)("div",{className:_.a.messagesColumn,children:[Object(p.jsx)("div",{className:_.a.messagesItems,children:Object(p.jsx)(C,Object(a.a)(Object(a.a)({},e),{},{dialogId:e.dialogId}))}),Object(p.jsx)(R,Object(a.a)({addNewMessage:e.addNewMessage,dialogId:e.dialogId,resetNewMessageField:e.resetNewMessageField,setCurrentTextOfMessage:e.setCurrentTextOfMessage},e))]})]})]})},J=t(28),S=function(e){Object(i.a)(t,e);var s=Object(l.a)(t);function t(){return Object(o.a)(this,t),s.apply(this,arguments)}return Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.authorizedUserId;this.props.getUserProfile(e)}},{key:"render",value:function(){var e=this.props.match.params.dialogId;return console.log(e),Object(p.jsx)(W,Object(a.a)(Object(a.a)({},this.props),{},{dialogId:e}))}}]),t}(c.a.Component);s.default=Object(m.d)(Object(d.b)((function(e){return{dialogs:e.dialogsPage.dialogs,dialogsMessages:e.dialogsPage.dialogsMessages,isAuth:e.auth.isAuth,authorizedUserId:e.auth.userId,photos:e.profilePage.profileInfo.photos.small}}),{addNewMessage:j.b,getUserProfile:J.e,resetNewMessageField:j.d,setCurrentTextOfMessage:j.a.setCurrentTextOfMessage}),g.g,u.a)(S)}}]);
//# sourceMappingURL=3.d53bb3bf.chunk.js.map